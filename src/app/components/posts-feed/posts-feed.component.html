<!--Create new post-->
<a
  [routerLink]="['/post-creation']"
  routerLinkActive="active"
  ariaCurrentWhenActive="page"
  >Create new post</a
>

<!--Search posts by title or body-->
<app-post-search (searchResults)="onSearchResults($event)"></app-post-search>

<div *ngIf="posts.length > 0; else noPosts" class="p-4 space-y-4">
  <div *ngFor="let post of posts" class="bg-white p-4 rounded-lg shadow-md">
    <h3 class="text-lg font-bold">{{ post.title }}</h3>
    <p class="text-gray-600">{{ post.body }}</p>

    <!--Show comments button-->
    <button
      class="mt-3 w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600"
      (click)="toggleComments(post.id)"
    >
      Show Comments
    </button>

    <!--Only show comments when toggleComments is clicked and pass post id to comments component-->
    <app-comments
      *ngIf="showComments[post.id]"
      [postId]="post.id"
    ></app-comments>
  </div>
</div>

<ng-template #noPosts>
  <p>Nessun post trovato per questo utente.</p>
</ng-template>

<ng-template #noComments>
  <p>Nessun commento trovato per questo post.</p>
</ng-template>

<app-paginator
  [totalItems]="totalPosts"
  [itemsPerPage]="pageSize"
  [currentPage]="currentPage"
  (pageChange)="onPageChange($event)"
></app-paginator>
